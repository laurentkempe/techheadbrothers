<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/ico" href="/favicon.ico"><link rel="stylesheet" href="https://cdn.vidstack.io/player.css"><meta name="generator" content="Astro v5.2.5"><title>Laurent Kempé - Simplify your .NET Docker image publishing workflow with the .NET SDK</title><link rel="stylesheet" href="/_astro/_slug_.DKcIe2eh.css">
<style>a[data-astro-cid-5grsw2hi]{color:#00539f}.tags[data-astro-cid-5grsw2hi]{display:flex;flex-wrap:wrap}.tag[data-astro-cid-5grsw2hi]{margin:.25em;border:dotted 1px #a1a1a1;border-radius:.5em;padding:.5em 1em;font-size:1.15em;background-color:#f8fcfd}
</style></head> <body> <header class="py-6 border-b container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl"> <nav class="container mx-auto px-4 flex flex-col sm:flex-row items-center justify-between"> <div class="text-2xl font-bold mb-4 sm:mb-0"> <a href="/">Laurent Kempé</a> </div> <div class="flex gap-6 text-gray-600"> <a href="/" class="hover:text-gray-900 ">Home</a> <a href="/blog/1" class="hover:text-gray-900 ">Blog</a> <a href="/speaking" class="hover:text-gray-900 ">Speaking</a> <a href="/about-laurent-kempe" class="hover:text-gray-900 ">About</a> </div> </nav> </header> <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">  <p data-astro-cid-5grsw2hi><em data-astro-cid-5grsw2hi></em></p> <div class="relative pt-1" data-astro-cid-5grsw2hi> <img src="https://live.staticflickr.com/65535/46849237035_950332fe54_h.jpg" alt="Fort du Lomont, France" data-astro-cid-5grsw2hi="true" width="1600" height="1067" loading="lazy" decoding="async" class="w-full"> <div class="absolute text-white top-1/3 left-1/3 transform -translate-x-1/4 -translate-y-1/4" data-astro-cid-5grsw2hi> <p class="text-2xl sm:text-3xl md:text-5xl font-extrabold drop-shadow-[0_4px_3px_rgb(0,0,0,0.5)]" data-astro-cid-5grsw2hi>Simplify your .NET Docker image publishing workflow with the .NET SDK</p> <p class="py-2 text-sm sm:text-base" data-astro-cid-5grsw2hi>Oct 24, 2023</p> </div> <p class="absolute text-sm sm:text-xs text-white bottom-5 right-5" data-astro-cid-5grsw2hi>Fort du Lomont, France</p> </div> <div class="py-4" data-astro-cid-5grsw2hi>  <article class="prose prose-lg max-w-none dark:prose-invert
                    prose-h1:font-bold prose-h1:text-4xl prose-h1:mb-4
                    prose-a:text-blue-600 prose-a:no-underline
                    prose-p:text-justify prose-img:rounded-xl"> <p>In my previous blog posts, I wrote about the <strong>built-in container support</strong> in the <strong>.NET 7 SDK</strong> that allows you to create and publish Docker images for your .NET applications without writing any Dockerfile. I also showed how to use the <strong>Chiseled Ubuntu</strong> base images optimized for .NET and containers.</p>
<p>For this blog post, I will explain how to publish your Docker images using the .NET SDK to <strong>GitHub Packages / Container Registry</strong>. It is possible to publish to different <strong>container registries</strong>, such as Docker Hub, GitHub, Azure Container Registry, or your own private registry. I will show you how to publish to GitHub Packages / Container Registry, but the process is similar for other registries.</p>
<p>This blog post will help you learn how to leverage the .NET SDK’s built-in container support to effortlessly distribute and run your .NET applications in the cloud using Docker. Stay tuned!</p>

<h1 id="prerequisites">Prerequisites</h1>
<p>To follow along with this blog post, you will need the following</p>
<ul>
<li><a href="https://dotnet.microsoft.com/download/dotnet/7.0">.NET 7 SDK</a> or later</li>
</ul>
<p>If you target a remote container registry, only the .NET SDK is required.</p>
<p>To publish your Docker images to a local container registry, you will also need</p>
<ul>
<li><a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a> installed</li>
</ul>
<h1 id="publish-profiles">Publish profiles</h1>
<p>Like my previous blog post, I will use the publishing profiles to define the Docker image name and tag. I will also use publishing profiles to set the base image and the registry name for the Docker image.</p>
<p>In this blog post, we are focusing on <code>ContainerRegistry</code> and <code>ContainerImageName</code> properties.</p>
<h2 id="github-packages--container-registry-publish-profile">GitHub Packages / Container Registry publish profile</h2>
<p>Where the new image goes after being created depends on the container registry property, <code>ContainerRegistry</code>, which specifies the target registry. In the case of GitHub Container Registry you need to set <code>ContainerRegistry</code> to <code>ghcr.io</code>.</p>
<p>The <code>ContainerImageName</code> needs to be set as a path using your GitHub username, <code>laurentkempe</code>, then <code>/</code> and the name of the image, <code>containerplayground</code>. <code>ContainerImageTag</code> specifies the tag of the image, e.g. <code>1.0.0</code>. To automate the versioning of your Docker image, you can glance my previous blog in the section “<a href="https://laurentkempe.com/2023/03/13/dotnet-7-sdk-built-in-container-improvements/">Tagging your image</a>”.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="xml"><code><span class="line"><span style="color:#E1E4E8">&lt;</span><span style="color:#85E89D">Project</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;</span><span style="color:#85E89D">PropertyGroup</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">EnableSdkContainerSupport</span><span style="color:#E1E4E8">&gt;true&lt;/</span><span style="color:#85E89D">EnableSdkContainerSupport</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">WebPublishMethod</span><span style="color:#E1E4E8">&gt;Container&lt;/</span><span style="color:#85E89D">WebPublishMethod</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">ContainerRegistry</span><span style="color:#E1E4E8">&gt;ghcr.io&lt;/</span><span style="color:#85E89D">ContainerRegistry</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">ContainerImageName</span><span style="color:#E1E4E8">&gt;laurentkempe/containerplayground&lt;/</span><span style="color:#85E89D">ContainerImageName</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">ContainerImageTag</span><span style="color:#E1E4E8">&gt;1.0.0&lt;/</span><span style="color:#85E89D">ContainerImageTag</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">ContainerBaseImage</span><span style="color:#E1E4E8">&gt;mcr.microsoft.com/dotnet/aspnet:7.0&lt;/</span><span style="color:#85E89D">ContainerBaseImage</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;/</span><span style="color:#85E89D">PropertyGroup</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;</span><span style="color:#85E89D">ItemGroup</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">        &lt;</span><span style="color:#85E89D">ContainerPort</span><span style="color:#B392F0"> Include</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;80&quot;</span><span style="color:#B392F0"> Type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">&quot;tcp&quot;</span><span style="color:#E1E4E8"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">    &lt;/</span><span style="color:#85E89D">ItemGroup</span><span style="color:#E1E4E8">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8">&lt;/</span><span style="color:#85E89D">Project</span><span style="color:#E1E4E8">&gt;</span></span></code></pre>
<p>To be able to publish, it is extremely simple with the command specifying the GitHub publish profile.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="powershell"><code><span class="line"><span style="color:#E1E4E8">dotnet publish </span><span style="color:#F97583">--</span><span style="color:#E1E4E8">os linux </span><span style="color:#F97583">--</span><span style="color:#E1E4E8">arch x64 </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">p:PublishProfile</span><span style="color:#F97583">=</span><span style="color:#E1E4E8">github </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">c Release</span></span></code></pre>
<p>This publishing profile will create a Docker image named <code>ghcr.io/laurentkempe/containerplayground:1.0.0</code>.</p>
<p>You will then be able to pull it using the following command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="powershell"><code><span class="line"><span style="color:#E1E4E8">docker pull ghcr.io</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">laurentkempe</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">containerplayground:</span><span style="color:#79B8FF">1.0</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">0</span></span></code></pre>
<p>or run it</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="powershell"><code><span class="line"><span style="color:#E1E4E8">docker run </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">it </span><span style="color:#F97583">--</span><span style="color:#E1E4E8">rm </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">p </span><span style="color:#79B8FF">8080</span><span style="color:#E1E4E8">:</span><span style="color:#79B8FF">80</span><span style="color:#E1E4E8"> ghcr.io</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">laurentkempe</span><span style="color:#F97583">/</span><span style="color:#E1E4E8">containerplayground:</span><span style="color:#79B8FF">1.0</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">0</span></span></code></pre>
<p>Finally, browse to <a href="http://localhost:8080/">http://localhost:8080/</a> to see the “Hello World!” message.</p>
<h1 id="authentication">Authentication</h1>
<p>To publish to a remote container registry, you need to authenticate. The authentication method depends on the registry you are targeting.</p>
<p>Publishing to GitHub Container Registry uses a <a href="https://docs.github.com/en/github/authenticating-to-github/keeping-your-account-and-data-secure/creating-a-personal-access-token">Personal Access Token (classic)</a> (PAT) with the <code>read:packages</code> and <code>write:packages</code> scopes. You can then use this PAT as your password when authenticating to GitHub Container Registry.</p>
<p>To authenticate to GitHub Container Registry, you can use the <code>docker login</code> command:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8;overflow-x:auto" tabindex="0" data-language="powershell"><code><span class="line"><span style="color:#E1E4E8">docker login ghcr.io </span><span style="color:#F97583">-</span><span style="color:#E1E4E8">u </span><span style="color:#F97583">&lt;</span><span style="color:#E1E4E8">username</span><span style="color:#F97583">&gt;</span><span style="color:#F97583"> -</span><span style="color:#E1E4E8">p </span><span style="color:#F97583">&lt;</span><span style="color:#E1E4E8">token</span><span style="color:#F97583">&gt;</span></span></code></pre>
<p>It is a way of interacting with a Docker config file containing rules for authenticating with specific registries.</p>
<p>You can read more about authenticating to container registries for the .NET SDK <a href="https://github.com/dotnet/sdk-container-builds/blob/main/docs/RegistryAuthentication.md">here</a>. Or, in our case, about the authentication methods for GitHub Container Registry <a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry#authenticating-to-github-container-registry">here</a>.</p>
<h1 id="supported-registries">Supported registries</h1>
<p>The .NET SDK supports publishing to any registry that supports the Docker Registry HTTP API V2.</p>
<p>Here is a list of supported registries:</p>
<ul>
<li><a href="https://azure.microsoft.com/products/container-registry">Azure Container Registry</a></li>
<li><a href="https://aws.amazon.com/ecr/">Amazon Elastic Container Registry</a></li>
<li><a href="https://cloud.google.com/artifact-registry">Google Artifact Registry</a></li>
<li><a href="https://hub.docker.com/">Docker Hub</a></li>
<li><a href="https://docs.github.com/en/packages/working-with-a-github-packages-registry/working-with-the-container-registry">GitHub Packages</a></li>
<li><a href="https://docs.gitlab.com/ee/user/packages/container_registry/">GitLab-hosted Container Registry</a></li>
<li><a href="https://quay.io/">Quay.io</a></li>
</ul>
<h1 id="conclusion">Conclusion</h1>
<p>In this blog post, I showed you how to use the .NET SDK’s built-in container support to publish your .NET applications to Docker image. I also demonstrated how to use variables in your project file to customize base image, image tag, and registry name for your Docker images. Finally, I showed you how to publish your Docker images to different container registries, such as GitHub, Azure Container Registry or Docker Hub.</p>
<h1 id="references">References</h1>
<ul>
<li><a href="https://devblogs.microsoft.com/dotnet/announcing-builtin-container-support-for-the-dotnet-sdk/">Announcing built-in container support for the .NET SDK</a></li>
<li><a href="https://laurentkempe.com/2023/03/13/dotnet-7-sdk-built-in-container-improvements/">.NET 7 SDK built-in container improvements</a></li>
<li><a href="https://laurentkempe.com/2022/11/14/dotnet-7-sdk-built-in-container-support-and-ubuntu-chiseled/">.NET 7 SDK built-in container support and Ubuntu Chiseled</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/docker/publish-as-container">Containerize an app with dotnet publish - .NET | Microsoft Learn</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/architecture/microservices/docker-application-development-process/docker-app-development-workflow">Development workflow for Docker apps | Microsoft Learn</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/core/docker/build-container">Containerize an app with Docker tutorial - .NET | Microsoft Learn</a></li>
<li><a href="https://docs.docker.com/registry/">Docker Registry HTTP API V2</a></li>
</ul>
<div class="my-5"> <a class="block max-w-[700px] p-8 rounded-lg border border-text/5 bg-text/[0.025] transition-all duration-200 ease-in-out hover:bg-text/[0.12] hover:border-text/10 text-text no-underline" href="https://github.com/laurentkempe/containerPlayground" target="_blank" style="color: inherit; text-decoration: none;"> <img class="w-20 h-20 rounded-full float-right ml-8 mb-8 mt-2.5" src="https://avatars.githubusercontent.com/u/272612?v=4" alt="laurentkempe avatar"> <p class="text-[1.8rem] tracking-wide m-0"> <span>laurentkempe/</span><b>containerPlayground</b> </p> <p class="text-[0.9rem] my-2.5"> Some experiments around .NET and container to learn. </p> <div class="flex items-center gap-16"> <div class="flex flex-row gap-2.5 justify-center"> <svg class="w-[1.1rem] h-[1.1rem] mt-1.5 text-text/70" viewBox="0 0 16 16" fill="currentColor"> <path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25Zm0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41L8 2.694Z"></path> </svg> <div class="flex flex-col"> <b class="text-[1.2rem]">1</b> <span class="text-[0.8rem] opacity-70">Stars</span> </div> </div> <div class="flex flex-row gap-2.5 justify-center"> <svg class="w-[1.1rem] h-[1.1rem] mt-1.5 text-text/70" viewBox="0 0 16 16" fill="currentColor"> <path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0ZM5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Zm6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0Z"></path> </svg> <div class="flex flex-col"> <b class="text-[1.2rem]">0</b> <span class="text-[0.8rem] opacity-70">Forks</span> </div> </div> <div class="flex flex-row gap-2.5 justify-center"> <svg class="w-[1.1rem] h-[1.1rem] mt-1.5 text-text/70" viewBox="0 0 16 16" fill="currentColor"> <path d="M8 9.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"></path> <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Z"></path> </svg> <div class="flex flex-col"> <b class="text-[1.2rem]">0</b> <span class="text-[0.8rem] opacity-70">Issues</span> </div> </div> </div> </a> </div> </article>  </div> <div class="tags" data-astro-cid-5grsw2hi> <p class="tag" data-astro-cid-5grsw2hi><a href="/tags/.NET SDK" data-astro-cid-5grsw2hi>.NET SDK</a></p><p class="tag" data-astro-cid-5grsw2hi><a href="/tags/Docker" data-astro-cid-5grsw2hi>Docker</a></p><p class="tag" data-astro-cid-5grsw2hi><a href="/tags/GitHub" data-astro-cid-5grsw2hi>GitHub</a></p> </div>  </div> <footer class="py-8"> <div class="container mx-auto gap-4 px-4 text-sm text-gray-600 text-center"> <div>
&copy; 2025 Laurent Kempé. All rights reserved.
</div> <div>
The expressed opinions are my own and do not reflect those of my employer or any third-party entities.
</div> </div> </footer> <script src="https://cdn.vidstack.io/player.core" type="module"></script> <script src="https://cdn.vidstack.io/icons" type="module"></script> </body> </html> 